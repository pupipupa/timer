<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyTime - assistant pour √©tudier</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Chart.js pour les statistiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="pixel-bg"></div>
    
    <!-- √âcran de connexion -->
    <div id="login-screen" class="screen active">
        <div class="window login-window">
            <div class="window-header">
                <span class="window-title">üíæ StudyTime</span>
                <button class="window-btn close-btn">‚úï</button>
            </div>
            <div class="window-content">
                <div class="pixel-logo">
                    <div class="logo-heart">üíñ</div>
                    <h1>StudyTime</h1>
                    <p class="subtitle">assistant pour √©tudier</p>
                </div>
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="username">Nom d'utilisateur:</label>
                        <input type="text" id="username" class="pixel-input" placeholder="Entrez votre nom..." required>
                    </div>
                    <div class="form-group">
                        <label for="password">Mot de passe:</label>
                        <input type="password" id="password" class="pixel-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="pixel-btn primary-btn">log in</button>
                    <button type="button" id="signup-btn" class="pixel-btn secondary-btn">sign up </button>
                </form>
            </div>
        </div>
    </div>

    <!-- √âcran principal -->
    <div id="main-screen" class="screen">
        <!-- Barre sup√©rieure -->
        <header class="top-bar">
            <div class="user-info">
                <div class="user-avatar"><img id="top-user-photo" src="default.jpeg" alt="avatar"/></div>
                <div class="user-details">
                    <div class="top-left-main">
                        <div class="user-name-pink" id="top-username-pink">‚Äî</div>
                        <div class="total-time" id="top-total-time">0 min</div>
                    </div>
                    <div class="level-info">
                        <span class="rank-label">Rang: <span id="user-rank">‚Äî</span></span>
                    </div>
                </div>
            </div>
            <nav class="main-nav">
                <button class="nav-btn active" data-tab="dashboard">üìä Tableau de Bord</button>
                <button class="nav-btn" data-tab="statistics">üìà Statistiques</button>
                <button class="nav-btn" data-tab="tournaments">‚öîÔ∏è Tournois</button>
                <button class="nav-btn" data-tab="leaderboards">üèÖ Classements</button>
                <button class="nav-btn" data-tab="friends">ü§ù Amis</button>
                <button class="nav-btn" data-tab="githubsync">üêô Sync GitHub</button>
                <button class="nav-btn" data-tab="achievements">üèÜ Succ√®s</button>
                <button class="nav-btn" data-tab="settings">‚öôÔ∏è Param√®tres</button>
                <button class="nav-btn" data-tab="profile">üë§ Profil</button>
            </nav>
            <button id="logout-btn" class="pixel-btn logout-btn">‚Ü©Ô∏è Se d√©connecter</button>
        </header>
        <main class="content-container">
            <!-- Tableau de Bord -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="dashboard-grid">
                    <!-- Minuteur principal -->
                    <div class="timer-window window">
                        <div class="window-header">
                            <span class="window-title">‚è∞ Minuteur</span>
                        </div>
                        <div class="window-content">
                            <div class="timer-display">
                                <div class="timer-type">
                                    <span id="current-timer-type">Pomodoro</span>
                                    <span id="timer-session">Travail</span>
                                </div>
                                <div class="time-display" id="time-display">25:00</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                            </div>
                            <div class="timer-controls">
                                <button id="start-btn" class="pixel-btn primary-btn">‚ñ∂Ô∏è D√©marrer</button>
                                <button id="pause-btn" class="pixel-btn secondary-btn hidden">‚è∏Ô∏è Pause</button>
                                <button id="stop-btn" class="pixel-btn danger-btn">‚èπÔ∏è Arr√™ter</button>
                                <button id="skip-btn" class="pixel-btn secondary-btn">‚è≠Ô∏è Passer</button>
                            </div>
                            <div class="timer-selector">
                                <select id="timer-type" class="pixel-select">
                                    <option value="pomodoro">üçÖ Pomodoro (25/5 min)</option>
                                    <option value="deep">üß† Concentration Profonde (90/20 min)</option>
                                    <option value="sprint">‚ö° Sprint Rapide (15/3 min)</option>
                                    <option value="custom">üõ†Ô∏è Personnalis√©</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- Statistiques rapides -->
                    <div class="stats-window window">
                        <div class="window-header">
                            <span class="window-title">üìä Aujourd'hui</span>
                        </div>
                        <div class="window-content">
                            <div class="quick-stats">
                                <div class="stat-item">
                                    <div class="stat-icon">üî•</div>
                                    <div class="stat-info">
                                        <span class="stat-value" id="current-streak">7</span>
                                        <span class="stat-label">jours cons√©cutifs</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">‚è±Ô∏è</div>
                                    <div class="stat-info">
                                        <span class="stat-value" id="today-time">0</span>
                                        <span class="stat-label">min aujourd'hui</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">‚úÖ</div>
                                    <div class="stat-info">
                                        <span class="stat-value" id="sessions-completed">24</span>
                                        <span class="stat-label">sessions</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">üìà</div>
                                    <div class="stat-info">
                                        <span class="stat-value" id="completion-rate">73</span>
                                        <span class="stat-label">% compl√©tion</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Succ√®s r√©cents -->
                    <div class="achievements-window window">
                        <div class="window-header">
                            <span class="window-title">üèÖ Succ√®s</span>
                        </div>
                        <div class="window-content">
                            <div class="recent-achievements" id="recent-achievements">
                                <div class="achievement-badge">
                                    <span class="achievement-icon">üèÜ</span>
                                    <span class="achievement-name">Premier Minuteur</span>
                                </div>
                                <div class="achievement-badge">
                                    <span class="achievement-icon">üî•</span>
                                    <span class="achievement-name">S√©rie de 5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Statistiques -->
            <div id="statistics-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">üìà Statistiques D√©taill√©es</span>
                    </div>
                    <div class="window-content">
                        <div class="stats-header">
                            <div class="stats-owner">
                                <div class="stats-owner-avatar"><img id="stats-owner-photo" src="default.jpeg" alt="owner"></div>
                                <div class="stats-owner-info">
                                    <div id="stats-owner-name" class="stats-owner-name">Mes Statistiques</div>
                                    <div id="stats-owner-meta" class="stats-owner-meta">S√©lection: vous</div>
                                </div>
                                <button id="stats-back-to-me" class="pixel-btn secondary-btn">Retour √† moi</button>
                            </div>
                            <div class="stats-summary">
                                <div class="stat-mini"><strong id="summary-total">0</strong><span>min totales</span></div>
                                <div class="stat-mini"><strong id="summary-avg">0</strong><span>moy / jour</span></div>
                                <div class="stat-mini"><strong id="summary-streak">0</strong><span>record s√©rie</span></div>
                                <div class="stat-mini"><strong id="summary-eff">0%</strong><span>taux compl.</span></div>
                            </div>
                        </div>
                        <div class="advanced-analytics-grid">
                            <div class="analytics-block">
                                <h3>‚ö° Efficacit√© - Semaine</h3>
                                <div class="chart-container" id="chart-week" style="height:280px;position:relative"><canvas></canvas></div>
                            </div>
                            <div class="analytics-block">
                                <h3>üìä Sessions: Compl√®tes vs Interrompues</h3>
                                <div class="chart-container" id="chart-completion" style="height:280px;position:relative"><canvas></canvas></div>
                                <div class="completion-stats">
                                    <p><span class="stat-highlight" id="complete-sessions">18</span> sessions compl√®tes</p>
                                    <p><span class="stat-highlight" id="interrupted-sessions">6</span> sessions interrompues</p>
                                    <p>Temps r√©el: <span class="stat-highlight" id="real-time">1450</span> min</p>
                                    <p>Temps pr√©vu: <span class="stat-highlight" id="planned-time">1800</span> min</p>
                                </div>
                            </div>
                            <div class="analytics-block">
                                <h3>üìä Distribution par Mati√®re</h3>
                                <div class="chart-container" id="chart-categories" style="height:280px;position:relative"><canvas></canvas></div>
                            </div>
                            <div class="analytics-block">
                                <h3>üî¨ Analyse des Pauses</h3>
                                <div class="chart-container" id="chart-correlation" style="height:280px;position:relative"><canvas></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tournois -->
            <div id="tournaments-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">‚öîÔ∏è Tournois et Comp√©titions</span>
                    </div>
                    <div class="window-content">
                        <div class="tournament-sections">
                            <div class="tournament-info">
                                <h3>Tournoi Actuel: <span id="weekly-t-name">D√©fi Focus Hebdomadaire</span></h3>
                                <p>Cat√©gories: <span>D√©butant, Avanc√©, Expert</span></p>
                                <p>Prix: <span>500, 300, 200 points</span></p>
                                <button id="register-weekly" class="pixel-btn primary-btn">Participer</button>
                            </div>
                            <div class="tournament-bracket">
                                <h3>Classement du Tournoi</h3>
                                <div id="bracket-container">
                                    <p>Les participants seront affich√©s apr√®s l'inscription</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Classements -->
            <div id="leaderboards-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">üèÖ Classements Globaux</span>
                    </div>
                    <div class="window-content">
                        <div class="leaderboard-table-block">
                            <table class="leaderboard-table" id="global-leaderboard">
                                <thead>
                                    <tr>
                                        <th>Rang</th>
                                        <th>Avatar</th>
                                        <th>Nom</th>
                                        <th>Temps (min)</th>
                                        <th>Ligue</th>
                                        <th>Etudes</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Amis -->
            <div id="friends-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">ü§ù Amis et √âquipes</span>
                    </div>
                    <div class="window-content">
                        <div class="friends-block">
                            <h3>Ajouter des amis</h3>
                            <form id="add-friend-form" class="add-friend-form">
                                <input type="text" id="friend-username" class="pixel-input" placeholder="Nom d'utilisateur..." required>
                                <button type="submit" class="pixel-btn secondary-btn">‚ûï Ajouter</button>
                            </form>
                            <div id="friends-list" class="friends-list"></div>
                            <div id="group-streak" class="group-streak"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sync GitHub -->
            <div id="githubsync-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">üêô Synchronisation GitHub</span>
                    </div>
                    <div class="window-content">
                        <div id="github-locked-content" class="github-locked">
                            <p>üîí Acc√®s restreint aux param√®tres de synchronisation</p>
                            <button id="unlock-github" class="pixel-btn primary-btn">üîì D√©bloquer l'acc√®s</button>
                        </div>
                        <div id="github-unlocked-content" class="github-unlocked hidden">
                            <form id="github-sync-form" class="github-sync-form">
                                <div class="form-group">
                                    <label for="github-token">Token d'Acc√®s Personnel GitHub:</label>
                                    <input type="password" id="github-token" class="pixel-input" placeholder="Token GitHub..." required>
                                </div>
                                <button type="button" id="test-github-token" class="pixel-btn secondary-btn">Tester le token</button>
                                <button type="button" id="start-sync" class="pixel-btn primary-btn">D√©marrer la synchronisation</button>
                            </form>
                            <div class="github-status" id="github-status"></div>
                            <div class="github-settings">
                                <label class="checkbox-label"><input type="checkbox" id="auto-backup" checked><span class="checkmark"></span>Sauvegarde automatique</label>
                                <label class="checkbox-label"><input type="checkbox" id="public-profile"><span class="checkmark"></span>Profil public</label>
                                <label class="checkbox-label"><input type="checkbox" id="share-statistics" checked><span class="checkmark"></span>Partager les statistiques</label>
                                <button type="button" id="restore-github-data" class="pixel-btn secondary-btn">Restaurer depuis GitHub</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Succ√®s -->
            <div id="achievements-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">üèÜ Tous les Succ√®s</span>
                    </div>
                    <div class="window-content">
                        <div class="achievements-grid" id="achievements-grid">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Param√®tres -->
            <div id="settings-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">‚öôÔ∏è Param√®tres</span>
                    </div>
                    <div class="window-content">
                        <div class="settings-sections">
                            <div class="settings-section">
                                <h3>üîä Son</h3>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sound-enabled" checked>
                                    <span class="checkmark"></span>
                                    Activer les notifications sonores
                                </label>
                            </div>
                            <div class="settings-section">
                                <h3>‚è∞ Minuteur personnalis√©</h3>
                                <div class="custom-timer-settings">
                                    <div class="setting-row">
                                        <label>Temps de travail (min):</label>
                                        <input type="number" id="custom-work" class="pixel-input" value="45" min="1" max="180">
                                    </div>
                                    <div class="setting-row">
                                        <label>Pause courte (min):</label>
                                        <input type="number" id="custom-short-break" class="pixel-input" value="10" min="1" max="30">
                                    </div>
                                    <div class="setting-row">
                                        <label>Pause longue (min):</label>
                                        <input type="number" id="custom-long-break" class="pixel-input" value="20" min="1" max="60">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Profil -->
            <div id="profile-tab" class="tab-content">
                <div class="window full-window">
                    <div class="window-header">
                        <span class="window-title">üë§ Profil Utilisateur</span>
                    </div>
                    <div class="window-content">
                        <div class="profile-sections">
                            <div class="profile-info">
                                <div class="profile-avatar">
                                        <div class="avatar-box">
                                            <img id="user-photo" src="default.jpeg" alt="Photo de profil">
                                        </div>
                                        <div class="avatar-actions">
                                            <button id="change-photo-btn" class="pixel-btn secondary-btn" type="button">‚úèÔ∏è Changer</button>
                                            <input type="file" id="photo-upload" accept="image/*" style="display:none;" />
                                        </div>
                                    </div>
                                <div class="profile-details">
                                    <h2 id="profile-username">Admin</h2>
                                    <p>Niveau <span id="profile-level">1</span> ‚Ä¢ <span id="profile-points">0</span> min d'√©tude</p>
                                    <p class="join-date">Derni√®re connexion: <span id="last-login">aujourd'hui</span></p>
                                    <h3>Etudes</h3>
                                    <input type="text" id="profile-etudes" class="pixel-input" placeholder="Entrez vos etudes" />
                                </div>
                            </div>
                            <div class="data-management">
                                <h3>üìÅ Gestion des Donn√©es</h3>
                                <div class="data-buttons">
                                    <button class="pixel-btn secondary-btn" id="export-data">üíæ Exporter les donn√©es</button>
                                    <button class="pixel-btn secondary-btn" id="import-data">üìÇ Importer les donn√©es</button>
                                    <input type="file" id="import-file" accept=".json" style="display: none;">
                                </div>
                                <p class="data-info">Exportez vos donn√©es pour une sauvegarde ou importez depuis un fichier.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de mot de passe GitHub -->
    <div id="github-password-modal" class="modal hidden">
        <div class="modal-content window password-modal">
            <div class="window-header">
                <span class="window-title">üîí Authentification requise</span>
                <button class="window-btn close-btn" id="close-password-modal">‚úï</button>
            </div>
            <div class="window-content">
                <div class="password-form">
                    <div class="lock-icon">üîê</div>
                    <p class="password-message">Mot de passe d'administration:</p>
                    <input type="password" id="github-admin-password" class="pixel-input password-input" placeholder="Entrez le mot de passe...">
                    <div class="password-error hidden" id="password-error">‚ùå Mot de passe incorrect !</div>
                    <div class="modal-buttons">
                        <button id="confirm-password" class="pixel-btn primary-btn">‚úÖ Confirmer</button>
                        <button id="cancel-password" class="pixel-btn secondary-btn">‚ùå Annuler</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de configuration du minuteur -->
    <div id="custom-timer-modal" class="modal hidden">
        <div class="modal-content window">
            <div class="window-header">
                <span class="window-title">üõ†Ô∏è Configurer le minuteur</span>
                <button class="window-btn close-btn" id="close-custom-modal">‚úï</button>
            </div>
            <div class="window-content">
                <div class="custom-timer-form">
                    <div class="form-row">
                        <label>Temps de travail:</label>
                        <input type="number" id="modal-work-time" class="pixel-input" min="1" max="180" value="25">
                        <span>min</span>
                    </div>
                    <div class="form-row">
                        <label>Pause courte:</label>
                        <input type="number" id="modal-short-break" class="pixel-input" min="1" max="30" value="5">
                        <span>min</span>
                    </div>
                    <div class="form-row">
                        <label>Pause longue:</label>
                        <input type="number" id="modal-long-break" class="pixel-input" min="1" max="60" value="15">
                        <span>min</span>
                    </div>
                    <div class="form-row">
                        <label>Cycles avant pause longue:</label>
                        <input type="number" id="modal-cycles" class="pixel-input" min="1" max="10" value="4">
                    </div>
                    <div class="modal-buttons">
                        <button id="save-custom-timer" class="pixel-btn primary-btn">üíæ Sauvegarder</button>
                        <button id="cancel-custom-timer" class="pixel-btn secondary-btn">‚ùå Annuler</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Simple chat panel -->
    <div id="chat-panel" class="modal hidden">
        <div class="modal-content window chat-modal">
            <div class="window-header">
                <span class="window-title" id="chat-with">Message</span>
                <button class="window-btn close-btn" id="close-chat">‚úï</button>
            </div>
            <div class="window-content">
                <div id="chat-messages" style="height:200px;overflow:auto;background:var(--y2k-background);padding:8px;border:1px solid var(--y2k-border);margin-bottom:8px;"></div>
                <div style="display:flex;gap:8px;">
                    <input id="chat-input" class="pixel-input" placeholder="Ecrire un message..." style="flex:1;" />
                    <button id="chat-send" class="pixel-btn primary-btn">Envoyer</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
