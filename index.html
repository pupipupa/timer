<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyTime - assistant pour Ã©tudier</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Chart.js pour les statistiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="pixel-bg"></div>
    
    <!-- Ã‰cran de connexion -->
    <div id="login-screen" class="screen active">
        <div class="window login-window">
            <div class="window-header">
                <span class="window-title">StudyTime</span>
                <button class="window-btn close-btn"></button>
            </div>
            <div class="window-content">
                <div class="pixel-logo">
                    <div class="logo-heart"></div>
                    <h1>StudyTime</h1>
                    <p class="subtitle">assistant pour Ã©tudier</p>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="username">Nom d'utilisateur</label>
                        <input type="text" id="username" class="pixel-input" placeholder="Entrez votre nom..." required>
                    </div>
                    <div class="form-group">
                        <label for="password">Mot de passe</label>
                        <input type="password" id="password" class="pixel-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="pixel-btn primary">Se connecter</button>
                    <button type="button" id="signup-btn" class="pixel-btn secondary">CrÃ©er un compte</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Ã‰cran principal -->
    <div id="main-screen" class="screen">
        <!-- Barre de navigation -->
        <nav class="nav-bar">
            <div class="nav-brand">
                <span class="nav-logo">ST</span>
                <span>StudyTime</span>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-tab="timer">â° Minuteur</button>
                <button class="nav-btn" data-tab="statistics">ğŸ“Š Statistiques</button>
                <button class="nav-btn" data-tab="achievements">ğŸ… SuccÃ¨s</button>
                <button class="nav-btn" data-tab="tournaments">âš”ï¸ Tournois</button>
                <button class="nav-btn" data-tab="leaderboards">ğŸ… Classements</button>
                <button class="nav-btn" data-tab="friends">ğŸ¤ Amis</button>
                <button class="nav-btn" data-tab="githubsync">ğŸ™ GitHub</button>
                <button class="nav-btn" data-tab="settings">âš™ï¸ ParamÃ¨tres</button>
                <button class="nav-btn" data-tab="profile">ğŸ‘¤ Profil</button>
                <button id="logout-btn" class="nav-btn logout">ğŸšª DÃ©connexion</button>
            </div>
        </nav>

        <!-- Contenu principal -->
        <main class="main-content">
            <!-- Onglet Minuteur -->
            <div id="timer-tab" class="tab-content active">
                <div class="timer-container">
                    <div class="timer-header">
                        <h2>â° Minuteur</h2>
                        <select id="timer-type" class="pixel-select">
                            <option value="pomodoro">Pomodoro</option>
                            <option value="deep">Concentration Profonde</option>
                            <option value="sprint">Sprint Rapide</option>
                            <option value="custom">PersonnalisÃ©</option>
                        </select>
                    </div>

                    <div class="timer-display">
                        <div class="timer-circle">
                            <div class="progress-ring">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                            <div class="timer-info">
                                <div id="timer-session" class="session-type">Travail</div>
                                <div id="time-display" class="time">25:00</div>
                                <div id="current-timer-type" class="timer-type-display">Pomodoro</div>
                            </div>
                        </div>
                    </div>

                    <div class="timer-controls">
                        <button id="start-btn" class="control-btn start">â–¶</button>
                        <button id="pause-btn" class="control-btn pause hidden">â¸</button>
                        <button id="stop-btn" class="control-btn stop">â¹</button>
                        <button id="skip-btn" class="control-btn skip">â­</button>
                    </div>
                </div>

                <!-- Statistiques quotidiennes -->
                <div class="daily-stats">
                    <h3>ğŸ“Š Aujourd'hui</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ”¥</div>
                            <div class="stat-info">
                                <div class="stat-value" id="current-streak">7</div>
                                <div class="stat-label">jours consÃ©cutifs</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">â±</div>
                            <div class="stat-info">
                                <div class="stat-value"><span id="today-time">0</span> min</div>
                                <div class="stat-label">aujourd'hui</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-info">
                                <div class="stat-value" id="sessions-completed">24</div>
                                <div class="stat-label">sessions</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¯</div>
                            <div class="stat-info">
                                <div class="stat-value"><span id="completion-rate">73</span> %</div>
                                <div class="stat-label">complÃ©tion</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SuccÃ¨s rÃ©cents -->
                <div class="recent-achievements">
                    <h3>ğŸ… SuccÃ¨s</h3>
                    <div id="recent-achievements" class="achievement-badges">
                        <div class="achievement-badge">
                            <span class="achievement-icon">ğŸ†</span>
                            <span class="achievement-name">Premier Minuteur</span>
                        </div>
                        <div class="achievement-badge">
                            <span class="achievement-icon">ğŸ”¥</span>
                            <span class="achievement-name">SÃ©rie de 5</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Statistiques -->
            <div id="statistics-tab" class="tab-content">
                <h2>ğŸ“ˆ Statistiques DÃ©taillÃ©es</h2>
                
                <div class="stats-section">
                    <h3>âš¡ EfficacitÃ© - Semaine</h3>
                    <div id="chart-week" class="chart-container">
                        <canvas></canvas>
                    </div>
                </div>

                <div class="stats-section">
                    <h3>ğŸ“Š Sessions: ComplÃ¨tes vs Interrompues</h3>
                    <div class="completion-stats">
                        <div class="completion-item">
                            <span class="completion-number" id="complete-sessions">18</span>
                            <span class="completion-label">sessions complÃ¨tes</span>
                        </div>
                        <div class="completion-item">
                            <span class="completion-number" id="interrupted-sessions">6</span>
                            <span class="completion-label">sessions interrompues</span>
                        </div>
                    </div>
                    <div class="time-comparison">
                        <p>Temps rÃ©el: <span id="real-time">1450</span> min</p>
                        <p>Temps prÃ©vu: <span id="planned-time">1800</span> min</p>
                    </div>
                    <div id="chart-completion" class="chart-container">
                        <canvas></canvas>
                    </div>
                </div>

                <div class="stats-section">
                    <h3>ğŸ“Š Distribution par MatiÃ¨re</h3>
                    <div id="chart-categories" class="chart-container">
                        <canvas></canvas>
                    </div>
                </div>

                <div class="stats-section">
                    <h3>ğŸ”¬ Analyse des Pauses</h3>
                    <div id="chart-correlation" class="chart-container">
                        <canvas></canvas>
                    </div>
                </div>
            </div>

            <!-- Onglet Tournois -->
            <div id="tournaments-tab" class="tab-content">
                <h2>âš”ï¸ Tournois et CompÃ©titions</h2>
                
                <div class="tournament-section">
                    <h3>Tournoi Actuel: <span id="weekly-t-name">DÃ©fi Focus Hebdomadaire</span></h3>
                    <div class="tournament-info">
                        <p><strong>CatÃ©gories:</strong> DÃ©butant, AvancÃ©, Expert</p>
                        <p><strong>Prix:</strong> 500, 300, 200 points</p>
                    </div>
                    <button id="register-weekly" class="pixel-btn primary">S'inscrire</button>
                </div>

                <div class="tournament-section">
                    <h3>Classement du Tournoi</h3>
                    <div id="bracket-container" class="bracket-container">
                        <p>Les participants seront affichÃ©s aprÃ¨s l'inscription</p>
                    </div>
                </div>
            </div>

            <!-- Onglet Classements -->
            <div id="leaderboards-tab" class="tab-content">
                <h2>ğŸ… Classements Globaux</h2>
                
                <div class="leaderboard-section">
                    <table id="global-leaderboard" class="pixel-table">
                        <thead>
                            <tr>
                                <th>Rang</th>
                                <th>Nom</th>
                                <th>Points</th>
                                <th>Ligue</th>
                                <th>Etudes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Les donnÃ©es seront insÃ©rÃ©es dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Onglet Amis -->
            <div id="friends-tab" class="tab-content">
                <h2>ğŸ¤ Amis et Ã‰quipes</h2>
                
                <div class="friends-section">
                    <h3>Ajouter des amis</h3>
                    <form id="add-friend-form" class="friend-form">
                        <input type="text" id="friend-username" class="pixel-input" placeholder="Nom d'utilisateur">
                        <button type="submit" class="pixel-btn primary">Ajouter</button>
                    </form>
                </div>

                <div class="friends-list">
                    <h3>Mes amis</h3>
                    <div id="friends-list-container">
                        <!-- Les amis seront ajoutÃ©s dynamiquement -->
                    </div>
                </div>

                <div class="group-study">
                    <h3>Ã‰tude en groupe</h3>
                    <div id="group-streak">
                        <!-- Informations sur les sÃ©ries de groupe -->
                    </div>
                </div>
            </div>

            <!-- Onglet GitHub Sync -->
            <div id="githubsync-tab" class="tab-content">
                <h2>ğŸ™ Synchronisation GitHub</h2>
                
                <!-- Contenu verrouillÃ© -->
                <div id="github-locked-content" class="locked-content">
                    <div class="lock-icon">ğŸ”’</div>
                    <p>AccÃ¨s restreint aux paramÃ¨tres de synchronisation</p>
                    <button id="unlock-github" class="pixel-btn primary">DÃ©verrouiller</button>
                </div>

                <!-- Contenu dÃ©verrouillÃ© -->
                <div id="github-unlocked-content" class="hidden">
                    <div class="github-status">
                        <div id="github-status">âŒ Non configurÃ©</div>
                    </div>

                    <div class="github-section">
                        <h3>Configuration</h3>
                        <div class="form-group">
                            <label for="github-token">Token GitHub:</label>
                            <input type="password" id="github-token" class="pixel-input" placeholder="ghp_...">
                        </div>
                        <div class="github-controls">
                            <button id="test-github-token" class="pixel-btn secondary">Tester</button>
                            <button id="start-sync" class="pixel-btn primary">DÃ©marrer Sync</button>
                        </div>
                    </div>

                    <div class="github-section">
                        <h3>Options</h3>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="auto-backup"> Sauvegarde automatique
                            </label>
                            <label>
                                <input type="checkbox" id="public-profile"> Profil public
                            </label>
                            <label>
                                <input type="checkbox" id="share-statistics"> Partager les statistiques
                            </label>
                        </div>
                    </div>

                    <div class="github-section">
                        <button id="restore-github-data" class="pixel-btn secondary">Restaurer depuis GitHub</button>
                    </div>
                </div>
            </div>

            <!-- Onglet SuccÃ¨s -->
            <div id="achievements-tab" class="tab-content">
                <h2>ğŸ† Tous les SuccÃ¨s</h2>
                <div id="achievements-grid" class="achievements-grid">
                    <!-- Les succÃ¨s seront chargÃ©s dynamiquement -->
                </div>
            </div>

            <!-- Onglet ParamÃ¨tres -->
            <div id="settings-tab" class="tab-content">
                <h2>âš™ï¸ ParamÃ¨tres</h2>
                
                <div class="settings-section">
                    <h3>ğŸ”Š Son</h3>
                    <label class="checkbox-label">
                        <input type="checkbox" id="sound-enabled" checked>
                        <span>Activer les sons</span>
                    </label>
                </div>

                <div class="settings-section">
                    <h3>â° Minuteur personnalisÃ©</h3>
                    <div class="custom-timer-settings">
                        <div class="form-group">
                            <label for="custom-work">Temps de travail (min):</label>
                            <input type="number" id="custom-work" class="pixel-input" value="45" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label for="custom-short-break">Pause courte (min):</label>
                            <input type="number" id="custom-short-break" class="pixel-input" value="10" min="1" max="30">
                        </div>
                        <div class="form-group">
                            <label for="custom-long-break">Pause longue (min):</label>
                            <input type="number" id="custom-long-break" class="pixel-input" value="20" min="1" max="60">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Profil (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸ etudes) -->
            <div id="profile-tab" class="tab-content">
                <h2>ğŸ‘¤ Profil Utilisateur</h2>
                
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <img id="user-photo" src="default.png" alt="Photo de profil" style="width:64px;height:64px;border-radius:8px;">
                            <input type="file" id="photo-upload" accept="image/*" style="margin-top:8px;" class="pixel-input">
                        </div>
                        <div class="profile-info">
                            <h2 id="profile-username">MaÃ®treÃ‰tude</h2>
                            <p>Niveau <span id="profile-level">5</span> â€¢ <span id="profile-points">1250</span> points</p>
                            <p>DerniÃ¨re connexion: <span id="last-login">aujourd'hui</span></p>
                        </div>
                    </div>
                    
                    <div class="profile-details">
                        <h3>Etudes</h3>
                        <input type="text" id="profile-etudes" class="pixel-input" placeholder="Entrez vos etudes" />
                        
                        <h3>ğŸ“ Gestion des DonnÃ©es</h3>
                        <p>Exportez vos donnÃ©es pour une sauvegarde ou importez depuis un fichier.</p>
                        <div class="data-controls">
                            <button id="export-data" class="pixel-btn secondary">Exporter</button>
                            <button id="import-data" class="pixel-btn secondary">Importer</button>
                            <input type="file" id="import-file" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <!-- Modal de mot de passe GitHub -->
    <div id="github-password-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ” AccÃ¨s Administrateur</h3>
                <button id="close-password-modal" class="close-btn">Ã—</button>
            </div>
            <div class="modal-body">
                <p>Entrez le mot de passe d'administration :</p>
                <input type="password" id="github-admin-password" class="pixel-input" placeholder="Mot de passe...">
                <div id="password-error" class="error-message hidden">Mot de passe incorrect</div>
            </div>
            <div class="modal-footer">
                <button id="confirm-password" class="pixel-btn primary">Confirmer</button>
                <button id="cancel-password" class="pixel-btn secondary">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal minuteur personnalisÃ© -->
    <div id="custom-timer-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âš™ï¸ Minuteur PersonnalisÃ©</h3>
                <button id="close-custom-modal" class="close-btn">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modal-work-time">Temps de travail (minutes):</label>
                    <input type="number" id="modal-work-time" class="pixel-input" value="45" min="1" max="120">
                </div>
                <div class="form-group">
                    <label for="modal-short-break">Pause courte (minutes):</label>
                    <input type="number" id="modal-short-break" class="pixel-input" value="10" min="1" max="30">
                </div>
                <div class="form-group">
                    <label for="modal-long-break">Pause longue (minutes):</label>
                    <input type="number" id="modal-long-break" class="pixel-input" value="20" min="1" max="60">
                </div>
                <div class="form-group">
                    <label for="modal-cycles">Nombre de cycles:</label>
                    <input type="number" id="modal-cycles" class="pixel-input" value="3" min="1" max="10">
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-custom-timer" class="pixel-btn primary">Sauvegarder</button>
                <button id="cancel-custom-timer" class="pixel-btn secondary">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Zone de notifications -->
    <div id="notifications-container"></div>

    <!-- Sons d'alerte -->
    <audio id="sound-start" preload="auto">
        <source src="sounds/start.mp3" type="audio/mpeg">
    </audio>
    <audio id="sound-complete" preload="auto">
        <source src="sounds/complete.mp3" type="audio/mpeg">
    </audio>
    <audio id="sound-error" preload="auto">
        <source src="sounds/error.mp3" type="audio/mpeg">
    </audio>

    <script src="app-final.js"></script>
</body>
</html>